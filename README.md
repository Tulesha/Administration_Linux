# Administration_Linux
## Лабораторная работа №1. Управление файлами и каталогами.
Задачи:
1. Освоить основные команды для работы с файлами и каталогами (директориями).
2. Научиться использовать справочную информацию по командам.

Подсказки:
1. При выполнении работы могут использоваться следующие команды:
cat; cd; chmod, cmp; cp; diff; find; head; less; ln; ls; man; mkdir; mv; nano; patch; rm; split; vi; wc.
2. Для получения подробного справочного руководства по любой команде можно набрать в консоли
«man название команды», для кратной справки – название_команды --help.
3. По умолчанию, команды выводят результаты работы в консоль. Для перенаправления
стандартного вывода с консоли в файл можно использовать операторы «>» или «>>».
4. Команды могут быть собраны в конвейеры с помощью оператора «|».
5. Для удобства работы можно пользоваться одновременно несколькими консолями. На одной
консоли читать справочное руководство, на другой редактировать скрипт и т.п. Переключаться между
ними можно нажатием комбинации клавиш Alt+Fn, где Fn — функциональная клавиша (F1 — для
первой консоли, F2- для второй и т.д.).
6. Для того чтобы было удобнее смотреть результаты выполнения тех команд, которые что-то
выводят на экран можно после них вставлять в скрипт паузу (с помощью команды sleep) или ожидать
нажатия Enter с помощью команды read.

Задание:

Создать скрипт (создать текстовый файл с необходимыми командами (добавив в начало #!/bin/sh),
сделать его исполняемым). Создать и редактировать скрипт можно в редакторах nano или vi.
Скрипт должен выполнять следующие действия:
1. Создать каталог test в домашнем каталоге пользователя.
2. Создать в нем файл list, содержащий список всех файлов и поддиректориев каталога /etc (включая
скрытые) в таком виде, что можно однозначно определить какая из записей является именем файла, а
какая — названием директории.
3. Вывести в конец этого файла два числа. Сначала количество поддиректориев в каталоге /etc, а
затем количество скрытых файлов в каталоге /etc.
4. Создать в каталоге test каталог links.
5. Создать в каталоге links жесткую ссылку на файл list с именем list_hlink.
6. Создать в каталоге links символическую ссылку на файл list с именем list_slink.
7. Вывести на экран количество имен (жестких ссылок) файла list_hlink, количество имен (жестких
ссылок) файла list и количество имен (жестких ссылок) файла list_slink.
8. Дописать в конец файла list_hlink число строк в файле links.
9. Сравнить содержимое файлов list_hlink и list_slink. Вывести на экран YES, если файлы
идентичны.
10. Переименовать файл list в list1.
11. Сравнить содержимое файлов list_hlink и list_slink. Вывести на экран YES, если файлы
идентичны.
12. Создать в домашнем каталоге пользователя жесткую ссылку на файл list_link с именем list1.
13. Создать в домашнем каталоге файл list_conf, содержащий список файлов с расширением .conf, из
каталога /etc и всех его подкаталогов.
14. Создать в домашнем каталоге файл list_d, содержащий список всех подкаталогов каталога /etc,
расширение которых .d.
15. Создать файл list_conf_d, включив в него последовательно содержимое list_conf и list_d.
16. Создать в каталоге test скрытый каталог sub.
17. Скопировать в него файл list_conf_d.
18. Еще раз скопировать туда же этот же файл в режиме автоматического создания резервной копии
замещаемых файлов.
19. Вывести на экран полный список файлов (включая все подкаталоги и их содержимое) каталога
test.
20. Создать в домашнем каталоге файл man.txt, содержащий документацию на команду man.

21. Разбить файл man.txt на несколько файлов, каждый из которых будет иметь размер не более 1
килобайта.
22. Создать каталог man.dir.
23. Переместить одной командой все файлы, полученные в пункте 21 в каталог man.dir.
24. Собрать файлы в каталоге man.dir обратно в файл с именем man.txt.
25. Сравнить файлы man.txt в домашней каталоге и в каталоге man.dir и вывести YES, если файлы
идентичны.
26. Добавить в файл man.txt, находящийся в домашнем каталоге несколько строчек с произвольными
символами в начало файла и несколько строчек в конце файла.
27. Одной командой получить разницу между файлами в отдельный файл в стандартном формате для
наложения патчей.
28. Переместить файл с разницей в каталог man.dir.
29. Наложить патч из файла с разницей на man.txt в каталоге man.dir.
30. Сравнить файлы man.txt в домашней каталоге и в каталоге man.dir и вывести YES, если файлы
идентичны.

Предъявить скрипт преподавателю и ответить на его вопросы по любым использованным командам и
выполняющимся операциям. Перед сдачей лабораторной работы подумать, как объяснить результаты
выполнения пунктов 7, 9, 11, 25, 30

## Лабораторная работа №2 Управление разделами дисковой системы, создание и монтирование файловых систем
Задачи:
1) Научиться создавать, изменять и удалять разделы на жестких дисках.
2) Научиться создавать и настраивать файловые системы.
3) Научиться монтировать файловые системы, находящиеся в локальном или сетевом доступе.

Подсказки:
1) В работе используются следующие команды (в дополнение к изученным в предыдущих лабораторных
работах): blkid, dumpe2fs, e2fsck, fdisk, lvcreate, mke2fs, mkfs.ext4, mount, mount.cifs, pvcreate, resize2fs, reboot,
tune2fs, umount, vgcreate.
2) Прочитайте документацию по указанным командам и определите их назначение до начала выполнения
заданий.
3) Параметры автоматического монтирования файловых систем при загрузке операционной системы задаются
в конфигурационном файле /etc/fstab.
4) Для получения подробного справочного руководства по любой команде можно набрать в консоли
«man название команды», для кратной справки — название_команды -h или название_команды --help.
5) Для удобства работы можно пользоваться одновременно несколькими консолями. На одной консоли читать
справочное руководство, на другой редактировать скрипт и т.п. Переключаться между ними можно нажатием
комбинации клавиш Alt+Fn, где Fn — функциональная клавиша (F1 — для первой консоли, F2- для второй, а
вот 7-я консоль обычно занята графическим интерфейсом).

Задание:

ВНИМАНИЕ! Перед началом работы создайте снимок виртуальной машины. Рекомендуется делать
снимки также перед выполнением пунктов 10 и 12 и 13.
Создайте текстовый файл в котором запишите последовательность команд для выполнения каждого из
нижеследующих заданий. Для команд, имеющих интерактивный интерфейс – опишите последовательность
выбора управляющих команд и их параметров. Если решение заключается в изменении конфигурационного
файла – укажите название файла и вносимые или изменяемые строки.

Требуемые действия.
1. Создайте новый раздел, начинающийся с первого свободного сектора и имеющий размер 300
МБайт.
2. Создайте файл в домашнем каталоге пользователя root и сохраните в него UUID созданного
раздела.
3. Создайте на созданном разделе файловую систему ext4 с размером блока 4096 байт.
4. Выведите на экран текущее состояние параметров, записанных в суперблоке созданной файловой
системы.
5. Настройте эту файловую систему таким образом, чтобы ее автоматическая проверка запускалась
через 2 месяца или каждое второе монтирование файловой системы.
6. Создайте в каталоге /mnt подкаталог newdisk и подмонтируйте в него созданную файловую
систему.
7. Создайте в домашнем каталоге пользователя root ссылку на смонтированную файловую систему
8. Создайте каталог с любым именем в смонтированной файловой системе.
9. Включите автомонтирование при запуске операционной системы созданной файловой системы в
/mnt/newdisk таким образом, чтобы было невозможно запускать исполняемые файлы, находящиеся
в этой системе, а также с отключением возможности записи времени последнего доступа к файлу
для ускорения работы с этой файловой системой. Перезагрузите операционную систему и
проверьте доступность файловой системы. Проверьте невозможность запустить исполняемый
файл, если он хранится в этой файловой системе.
10. Увеличьте размер раздела и файловой системы до 350 МБайт. Проверьте, что размер изменился.
11. Проверьте на наличие ошибок созданную файловую системы "в безопасном режиме", то есть в
режиме запрета внесения каких-либо изменений в файловую систему, даже если обнаружены ошибки.
12. Создайте новый раздел, размером в 12 Мбайт. Настройте файловую систему, созданную в пункте 3
таким образом, чтобы ее журнал был расположен на разделе, созданном в этом пункте.
13. Создайте два новых раздела, размером в 100 МБайт каждый.
14. Создайте группу разделов LVM и логический том LVM над созданными в предыдущем пункте
разделами. Создайте файловую систему ext4 для созданного логического тома LVM и
смонтируйте её в предварительно созданный каталог supernewdisk в каталоге mnt.
15. Создайте папку (каталог) в хостовой операционной системе и предоставьте к ней сетевой доступ,
создав сетевой ресурс на хостовой операционной системе. Создайте в директории /mnt
поддиректорию share и подмонтируйте в нее созданный сетевой ресурс.
16. Сделайте так, чтобы сетевой ресурс автоматически монтировалcя для чтения при загрузке
операционной системы. Перезагрузите операционную систему и проверьте, что автоматическое
монтирование ресурса выполнилось.
